/**
 * Syst√®me de traduction i18n pour le dashboard projets
 * G√®re les traductions fran√ßais/italien avec support des attributs et contenu dynamique
 */

class I18nSystem {
  constructor() {
    this.messages = {
      fr: {
        "app.title": "Dashboard Projets 2025 ‚Äî Nathan Villaume",
        "app.subtitle": "Synth√®se interactive ‚Äî ATS / ATR",
        "kpi.activeProjects": "Projets actifs",
        "kpi.deliveredResults": "R√©sultats livr√©s", 
        "kpi.skillsUsed": "Comp√©tences mises en jeu üîç",
        "filters.label": "Filtres :",
        "filters.all": "Tout",
        "status.label": "Statut :",
        "status.all": "Tous",
        "status.inProgress": "üü° En cours",
        "status.completed": "üü¢ Termin√©",
        "btn.addProject": "Ajouter un projet",
        "btn.share": "Partager",
        "btn.close": "Fermer",
        "btn.view": "Voir",
        "btn.details": "D√©tails",
        "drawer.objective": "Objectif",
        "drawer.realization": "R√©alisation",
        "drawer.results": "R√©sultats",
        "drawer.skills": "Comp√©tences",
        "drawer.screenshots": "üì∏ Captures d'√©cran",
        "drawer.media": "D√©mos & m√©dias",
        "card.objective": "üéØ Objectif",
        "card.realization": "R√©alisation",
        "card.results": "R√©sultats",
        "footer.lastUpdate": "Derni√®re mise √† jour",
        "footer.author": "Auteur",
        "skills.lexicon.title": "üìö Lexique des Comp√©tences",
        "skills.lexicon.subtitle": "comp√©tences techniques mobilis√©es",
        "skills.lexicon.description": "Ensemble des savoir-faire techniques mis en ≈ìuvre dans les projets 2025.",
        "skills.lexicon.clickHint": "üîç Cliquez sur une comp√©tence pour voir sa d√©finition",
        "skills.lexicon.defaultDesc": "Comp√©tence technique sp√©cialis√©e.",
        // Syst√®me de commentaires
        "comments.title": "Commentaires",
        "comments.add": "Ajouter un commentaire",
        "comments.placeholder": "√âcrivez votre commentaire...",
        "comments.send": "Envoyer",
        "comments.cancel": "Annuler",
        "comments.edit": "Modifier",
        "comments.delete": "Supprimer",
        "comments.reply": "R√©pondre",
        "comments.loading": "Chargement...",
        "comments.error": "Erreur lors du chargement",
        "comments.noComments": "Aucun commentaire pour le moment. Soyez le premier √† commenter !",
        "comments.nameLabel": "Nom",
        "comments.messageLabel": "Message",
        "comments.charCount": "/ 2000 caract√®res",
        "comments.loadMore": "Voir plus",
        "comments.namePlaceholder": "Votre nom",
        "comments.messagePlaceholder": "Votre commentaire...",
        // Menu de partage
        "share.title": "Partager le dashboard",
        "share.teams": "Ouvrir Teams + Copier message",
        "share.outlook": "Ouvrir Outlook (application)",
        "share.copy": "Copier le lien",
        // Authentification
        "auth.title": "Authentification requise",
        "auth.message": "Veuillez entrer le mot de passe administrateur pour ajouter un projet.",
        "auth.password": "Mot de passe",
        "auth.login": "Se connecter",
        "auth.cancel": "Annuler",
        "auth.error": "Mot de passe incorrect",
        // Traductions des projets
        "project.suivi-produit-ats.title": "Suivi Produit ‚Äì ATS",
        "project.suivi-produit-ats.objective": "Mettre en place une tra√ßabilit√© compl√®te des couronnes utilis√©es pour le treillis soud√©, du scan en entr√©e machine jusqu'au produit fini.",
        "project.suivi-produit-ats.real_short": ["Scan √©tiquettes des couronnes d'√©bauche", "Impression √©tiquettes roquette", "Base SQL stock roquette"],
        "project.suivi-produit-ats.real": ["Scan des √©tiquettes des couronne d'√©bauche", "Impression d'√©tiquettes roquette (poids r√©el/th√©orique, lot, coul√©e‚Ä¶)", "Base SQL pour gestion de stock", "Int√©gration supervision/production"],
        "project.suivi-produit-ats.results_short": ["Tra√ßabilit√© compl√®te", "R√©duction erreurs", "Conformit√© renforc√©e"],
        "project.suivi-produit-ats.results": ["Tra√ßabilit√© compl√®te bout-en-bout du scan d'entr√©e au produit fini", "R√©duction significative des erreurs humaines de saisie", "Optimisation logistique et conformit√© aux exigences qualit√©"],
        "project.gestion-rfid-ats.title": "Gestion RFID ‚Äì ATS",
        "project.gestion-rfid-ats.objective": "Chaque d√©marrage de machine est conditionn√© par la lecture du badge de pointage SAM, renfor√ßant ainsi la s√©curit√© et assurant une meilleure tra√ßabilit√©.",
        "project.gestion-rfid-ats.real_short": ["Badge obligatoire", "Base SQL √©quipes", "Stats op√©rateurs"],
        "project.gestion-rfid-ats.real": ["RFID obligatoire au d√©marrage de chaque machine", "Badge chef requis en cas de casse-fil pour validation", "Base SQL de gestion d'√©quipes et personnels", "Statistiques compl√®tes par op√©rateur et machine"],
        "project.gestion-rfid-ats.results_short": ["S√©curit√© renforc√©e", "Discipline accrue", "Tra√ßabilit√© op√©rateurs"],
        "project.gestion-rfid-ats.results": ["S√©curit√© renforc√©e avec contr√¥le d'acc√®s syst√©matique", "Discipline accrue et responsabilisation des √©quipes", "Suivi pr√©cis de la productivit√© par op√©rateur et par poste"],
        "project.gestion-rfid-atr.title": "Gestion RFID ‚Äì ATR",
        "project.gestion-rfid-atr.objective": "D√©ployer le m√™me dispositif RFID sur l'unit√© ATR (projet en cours).",
        "project.gestion-rfid-atr.real_short": ["Contr√¥le d√©marrage machines", "Adaptation base SQL existante", "Tra√ßabilit√© accrue"],
        "project.gestion-rfid-atr.real": ["Analyse des points de badgeage sur l'unit√© ATR", "Int√©gration avec base SQL existante", "Adaptation vues supervision et droits d'acc√®s", "Tra√ßabilit√© accrue"],
        "project.gestion-rfid-atr.results_short": ["POC en cours", "S√©curit√© cross-site", "Tra√ßabilit√© √©tendue"],
        "project.gestion-rfid-atr.results": ["Projet en cours (POC + phase de cadrage)", "S√©curit√© renforc√©e sur les deux sites (ATS/ATR)", "Tra√ßabilit√© cross-site unifi√©e", "Harmonisation des processus entre ATS et ATR"],
        "project.suivis-energies.title": "Suivis des Energies ‚Äì ATS / ATR",
        "project.suivis-energies.objective": "Donner une vision temps r√©el des mesure √©nerg√©tiques pour optimiser les co√ªts et d√©tecter les anomalies facilement.",
        "project.suivis-energies.real_short": ["Pose compteurs √©nergie", "Collecte OPC ‚Üí SQL", "Supervision web"],
        "project.suivis-energies.real": ["Pose de multiples compteurs d'√©nergie sur transformateurs et lignes", "Collecte automatique des donn√©es via OPC/IGS vers SQL Server", "Supervision ultra d√©taill√©e accessible depuis n'importe quel PC connect√© au r√©seau Sam/Riva, simplement via une URL", "Tableaux de bord interactifs avec graphiques temps r√©el"],
        "project.suivis-energies.results_short": ["Vision temps r√©el", "D√©tection anomalies", "Optimisation co√ªts"],
        "project.suivis-energies.results": ["Pilotage pr√©cis de l'√©nergie avec historiques d√©taill√©s", "D√©tection pr√©coce des d√©rives et anomalies de consommation", "Optimisation significative des co√ªts √©nerg√©tiques", "Support d√©cisionnel pour la direction avec KPIs √©nerg√©tiques"],
        "project.app-changement-gamme.title": "Application ¬´ Changement de Gamme ¬ª",
        "project.app-changement-gamme.objective": "Concevoir une application mobile destin√©e √† accompagner les √©quipes de production et de maintenance, afin d'optimiser leur efficacit√© et d'am√©liorer la coordination des changements de gammes.",
        "project.app-changement-gamme.real_short": ["Application Android", "API (Communication)", "Interface multi-devices"],
        "project.app-changement-gamme.real": ["Programmation native ANDROID en langage Kotlin", "API pour communication entre l'application et la base de donn√©es", "Navigation multi-√©crans adapt√©e (t√©l√©phone / tablette / PC)", "Interface Web d'administration pour gestion de l'utilisation de la tablette", "Syst√®me de notifications et guidage √©tape par √©tape"],
        "project.app-changement-gamme.results_short": ["Gain de temps", "Organisation am√©lior√©e", "Tra√ßabilit√© accrue"],
        "project.app-changement-gamme.results": ["Gain de temps significatif pour les √©quipes, avec une baisse des erreurs de saisie", "Organisation et structure des √©tapes de changement de gamme simplifi√©e", "Acc√®s direct aux r√©sultats et rapports de suivi en temps r√©el"],
        "project.suivis-soudures-atr.title": "Suivis des Soudures - ATR",
        "project.suivis-soudures-atr.objective": "Mettre en place un suivi et une tra√ßabilit√© compl√®te des soudures.",
        "project.suivis-soudures-atr.real_short": ["Table √©change SAM/PLC", "Base SQL historique", "Affichage dynamique"],
        "project.suivis-soudures-atr.real": ["Mise en place d'une table d'√©change standard entre le r√©seau SAM et les PLC des soudeuses", "Base SQL d√©di√©e pour historiser toutes les infos de soudure (date, ligne, lot, coul√©e, soudeur, param√®tres de soudage...)", "Affichage dynamique temps r√©el : liste des soudures + √©tat des soudeuses", "Saisie de commentaires en direct pour l'√©quipe de maintenance", "Export des donn√©es pour analyses qualit√©"],
        "project.suivis-soudures-atr.results_short": ["Tra√ßabilit√© soudures", "Visibilit√© √âtat soudeuses", "Analyses qualit√©"],
        "project.suivis-soudures-atr.results": ["Tra√ßabilit√© compl√®te des soudures et recuits avec historique d√©taill√©", "Visibilit√© accrue sur l'√©tat des machines en temps r√©el", "Communication facilit√©e entre production et maintenance", "Exploitation des donn√©es pour analyses qualit√© et maintenance pr√©dictive", "Conformit√© aux exigences de tra√ßabilit√© industrielle"],
        "project.camera-etiquette-atr.title": "D√©tection d'√©tiquette par Cam√©ra ‚Äì ATR",
        "project.camera-etiquette-atr.objective": "Emp√™cher qu'une bobine soit stock√©e sans √©tiquette.",
        "project.camera-etiquette-atr.real_short": ["Cam√©ra IFM LIGNE 7", "D√©tection √©tiquette", "Int√©gration Profinet"],
        "project.camera-etiquette-atr.real": ["Installation d'une cam√©ra IFM Vision Assistant sur le bobinoir de la ligne 7", "Param√©trage pr√©cis de l'algorithme de d√©tection d'√©tiquette (ROI, seuils, validation)", "Int√©gration compl√®te de la cam√©ra √† l'automate Siemens en Profinet", "Programmation du trigger pour piloter la cam√©ra au moment exact o√π l'√©tiquette est pos√©e", "Suivi statistique d√©taill√© des contr√¥les: nombre de d√©tections, taux de r√©ussite/√©chec, temps de cycle", "Interface op√©rateur pour visualisation en direct"],
        "project.camera-etiquette-atr.results_short": ["Z√©ro d√©faut √©tiquette", "Contr√¥le automatique", "Fiabilit√© 100%"],
        "project.camera-etiquette-atr.results": ["Suppression totale des risques d'exp√©dition de bobines sans √©tiquette", "Contr√¥le automatis√© ultra-rapide sans aucune surcharge pour l'op√©rateur", "Fiabilit√© renforc√©e du processus de production", "R√©duction drastique des non-conformit√©s client", "ROI rapide par √©limination des reprises et retours"],
        // L√©gendes d'images
        "image.etiquette-roquette": "√âtiquette roquette",
        "image.interface-supervision": "Interface supervision",
        "image.interface-rfid": "Interface RFID",
        "image.badge-operateur": "Badge op√©rateur",
        "image.interface-rfid-atr": "Interface RFID ATR",
        "image.tableau-bord-energetique": "Tableau de bord √©nerg√©tique",
        "image.ecran-accueil": "√âcran d'accueil",
        "image.liste-gammes": "Liste des Gammes",
        "image.validation-etapes": "Validation √©tapes",
        "image.interface-parametres": "Interface Param√®tres",
        "image.supervision-soudures": "Supervision soudures",
        "image.historique-parametres": "Historique param√®tres",
        "image.camera-detection": "Cam√©ra de d√©tection",
        // Zones des projets
        "area.ats-supervision-sql": "ATS ¬∑ Supervision ¬∑ SQL",
        "area.ats-rfid-securite": "ATS ¬∑ RFID ¬∑ S√©curit√©",
        "area.atr-rfid-securite": "ATR ¬∑ RFID ¬∑ S√©curit√©",
        "area.ats-atr-web-dataviz": "ATS ¬∑ ATR ¬∑ Web ¬∑ DataViz",
        "area.android-api-ux": "Android ¬∑ API ¬∑ UX",
        "area.atr-supervision-qualite": "ATR ¬∑ Supervision ¬∑ Qualit√©",
        "area.atr-vision-automatisme": "ATR ¬∑ Vision ¬∑ Automatisme"
      },
      it: {
        "app.title": "Dashboard Progetti 2025 ‚Äî Nathan Villaume",
        "app.subtitle": "Sintesi interattiva ‚Äî ATS / ATR",
        "kpi.activeProjects": "Progetti attivi",
        "kpi.deliveredResults": "Risultati consegnati",
        "kpi.skillsUsed": "Competenze utilizzate üîç",
        "filters.label": "Filtri :",
        "filters.all": "Tutto",
        "status.label": "Stato :",
        "status.all": "Tutti",
        "status.inProgress": "üü° In corso",
        "status.completed": "üü¢ Completato",
        "btn.addProject": "Aggiungi progetto",
        "btn.share": "Condividi",
        "btn.close": "Chiudi",
        "btn.view": "Visualizza",
        "btn.details": "Dettagli",
        "drawer.objective": "Obiettivo",
        "drawer.realization": "Realizzazione",
        "drawer.results": "Risultati",
        "drawer.skills": "Competenze",
        "drawer.screenshots": "üì∏ Screenshot",
        "drawer.media": "Demo & media",
        "card.objective": "üéØ Obiettivo",
        "card.realization": "Realizzazione",
        "card.results": "Risultati",
        "footer.lastUpdate": "Ultimo aggiornamento",
        "footer.author": "Autore",
        "skills.lexicon.title": "üìö Lessico delle Competenze",
        "skills.lexicon.subtitle": "competenze tecniche utilizzate",
        "skills.lexicon.description": "Insieme delle competenze tecniche utilizzate nei progetti 2025.",
        "skills.lexicon.clickHint": "üîç Clicca su una competenza per vedere la sua definizione",
        "skills.lexicon.defaultDesc": "Competenza tecnica specializzata.",
        // Syst√®me de commentaires
        "comments.title": "Commenti",
        "comments.add": "Aggiungi un commento",
        "comments.placeholder": "Scrivi il tuo commento...",
        "comments.send": "Invia",
        "comments.cancel": "Annulla",
        "comments.edit": "Modifica",
        "comments.delete": "Elimina",
        "comments.reply": "Rispondi",
        "comments.loading": "Caricamento...",
        "comments.error": "Errore durante il caricamento",
        "comments.noComments": "Nessun commento al momento. Sii il primo a commentare !",
        "comments.nameLabel": "Nome",
        "comments.messageLabel": "Messaggio",
        "comments.charCount": "/ 2000 caratteri",
        "comments.loadMore": "Vedi di pi√π",
        "comments.namePlaceholder": "Il tuo nome",
        "comments.messagePlaceholder": "Il tuo commento...",
        // Menu de partage
        "share.title": "Condividi la dashboard",
        "share.teams": "Apri Teams + Copia messaggio",
        "share.outlook": "Apri Outlook (applicazione)",
        "share.copy": "Copia il link",
        // Authentification
        "auth.title": "Autenticazione richiesta",
        "auth.message": "Inserisci la password amministratore per aggiungere un progetto.",
        "auth.password": "Password",
        "auth.login": "Accedi",
        "auth.cancel": "Annulla",
        "auth.error": "Password errata",
        // Traductions des projets en italien
        "project.suivi-produit-ats.title": "Tracciamento Prodotto ‚Äì ATS",
        "project.suivi-produit-ats.objective": "Implementare una tracciabilit√† completa delle corone utilizzate per il traliccio saldato, dalla scansione in entrata macchina fino al prodotto finito.",
        "project.suivi-produit-ats.real_short": ["Scansione etichette corone grezze", "Stampa etichette rocchetta", "Base SQL stock rocchetta"],
        "project.suivi-produit-ats.real": ["Scansione delle etichette delle corone grezze", "Stampa di etichette rocchetta (peso reale/teorico, lotto, colata...)", "Base SQL per gestione stock", "Integrazione supervisione/produzione"],
        "project.suivi-produit-ats.results_short": ["Tracciabilit√† completa", "Riduzione errori", "Conformit√† rafforzata"],
        "project.suivi-produit-ats.results": ["Tracciabilit√† completa end-to-end dalla scansione di entrata al prodotto finito", "Riduzione significativa degli errori umani di inserimento", "Ottimizzazione logistica e conformit√† ai requisiti qualit√†"],
        "project.gestion-rfid-ats.title": "Gestione RFID ‚Äì ATS",
        "project.gestion-rfid-ats.objective": "Ogni avvio di macchina √® condizionato dalla lettura del badge di timbratura SAM, rafforzando cos√¨ la sicurezza e garantendo una migliore tracciabilit√†.",
        "project.gestion-rfid-ats.real_short": ["Badge obbligatorio", "Base SQL squadre", "Statistiche operatori"],
        "project.gestion-rfid-ats.real": ["RFID obbligatorio all'avvio di ogni macchina", "Badge capo richiesto in caso di rottura filo per validazione", "Base SQL di gestione squadre e personale", "Statistiche complete per operatore e macchina"],
        "project.gestion-rfid-ats.results_short": ["Sicurezza rafforzata", "Disciplina maggiore", "Tracciabilit√† operatori"],
        "project.gestion-rfid-ats.results": ["Sicurezza rafforzata con controllo accessi sistematico", "Disciplina maggiore e responsabilizzazione delle squadre", "Monitoraggio preciso della produttivit√† per operatore e per postazione"],
        "project.gestion-rfid-atr.title": "Gestione RFID ‚Äì ATR",
        "project.gestion-rfid-atr.objective": "Implementare lo stesso dispositivo RFID sull'unit√† ATR (progetto in corso).",
        "project.gestion-rfid-atr.real_short": ["Controllo avvio macchine", "Adattamento base SQL esistente", "Tracciabilit√† aumentata"],
        "project.gestion-rfid-atr.real": ["Analisi dei punti di timbratura sull'unit√† ATR", "Integrazione con base SQL esistente", "Adattamento viste supervisione e diritti di accesso", "Tracciabilit√† aumentata"],
        "project.gestion-rfid-atr.results_short": ["POC in corso", "Sicurezza cross-site", "Tracciabilit√† estesa"],
        "project.gestion-rfid-atr.results": ["Progetto in corso (POC + fase di definizione)", "Sicurezza rafforzata sui due siti (ATS/ATR)", "Tracciabilit√† cross-site unificata", "Armonizzazione dei processi tra ATS e ATR"],
        "project.suivis-energies.title": "Monitoraggio Energie ‚Äì ATS / ATR",
        "project.suivis-energies.objective": "Fornire una visione in tempo reale delle misurazioni energetiche per ottimizzare i costi e rilevare facilmente le anomalie.",
        "project.suivis-energies.real_short": ["Installazione contatori energia", "Raccolta OPC ‚Üí SQL", "Supervisione web"],
        "project.suivis-energies.real": ["Installazione di multipli contatori di energia su trasformatori e linee", "Raccolta automatica dei dati via OPC/IGS verso SQL Server", "Supervisione ultra dettagliata accessibile da qualsiasi PC connesso alla rete Sam/Riva, semplicemente tramite un URL", "Dashboard interattivi con grafici tempo reale"],
        "project.suivis-energies.results_short": ["Visione tempo reale", "Rilevamento anomalie", "Ottimizzazione costi"],
        "project.suivis-energies.results": ["Pilotaggio preciso dell'energia con storici dettagliati", "Rilevamento precoce delle derive e anomalie di consumo", "Ottimizzazione significativa dei costi energetici", "Supporto decisionale per la direzione con KPI energetici"],
        "project.app-changement-gamme.title": "Applicazione ¬´ Cambio Gammes ¬ª",
        "project.app-changement-gamme.objective": "Progettare un'applicazione mobile destinata ad accompagnare i team di produzione e manutenzione, al fine di ottimizzare la loro efficienza e migliorare il coordinamento dei cambi gammes.",
        "project.app-changement-gamme.real_short": ["Applicazione Android", "API (Comunicazione)", "Interfaccia multi-dispositivi"],
        "project.app-changement-gamme.real": ["Programmazione nativa ANDROID in linguaggio Kotlin", "API per comunicazione tra l'applicazione e il database", "Navigazione multi-schermo adattata (telefono / tablet / PC)", "Interfaccia Web di amministrazione per gestione dell'utilizzo del tablet", "Sistema di notifiche e guida passo dopo passo"],
        "project.app-changement-gamme.results_short": ["Risparmio tempo", "Organizzazione migliorata", "Tracciabilit√† aumentata"],
        "project.app-changement-gamme.results": ["Risparmio di tempo significativo per i team, con una diminuzione degli errori di inserimento", "Organizzazione e struttura delle fasi di cambio gamme semplificata", "Accesso diretto ai risultati e rapporti di monitoraggio in tempo reale"],
        "project.suivis-soudures-atr.title": "Monitoraggio Saldature - ATR",
        "project.suivis-soudures-atr.objective": "Implementare un monitoraggio e una tracciabilit√† completa delle saldature.",
        "project.suivis-soudures-atr.real_short": ["Tabella scambio SAM/PLC", "Base SQL storico", "Visualizzazione dinamica"],
        "project.suivis-soudures-atr.real": ["Implementazione di una tabella di scambio standard tra la rete SAM e i PLC delle saldatrici", "Base SQL dedicata per storificare tutte le informazioni di saldatura (data, linea, lotto, colata, saldatore, parametri di saldatura...)", "Visualizzazione dinamica tempo reale: lista delle saldature + stato delle saldatrici", "Inserimento commenti in diretta per il team di manutenzione", "Export dei dati per analisi qualit√†"],
        "project.suivis-soudures-atr.results_short": ["Tracciabilit√† saldature", "Visibilit√† stato saldatrici", "Analisi qualit√†"],
        "project.suivis-soudures-atr.results": ["Tracciabilit√† completa delle saldature e ricotture con storico dettagliato", "Visibilit√† aumentata sullo stato delle macchine in tempo reale", "Comunicazione facilitata tra produzione e manutenzione", "Sfruttamento dei dati per analisi qualit√† e manutenzione predittiva", "Conformit√† ai requisiti di tracciabilit√† industriale"],
        "project.camera-etiquette-atr.title": "Rilevamento etichetta tramite Camera ‚Äì ATR",
        "project.camera-etiquette-atr.objective": "Impedire che una bobina venga stoccata senza etichetta.",
        "project.camera-etiquette-atr.real_short": ["Camera IFM LINEA 7", "Rilevamento etichetta", "Integrazione Profinet"],
        "project.camera-etiquette-atr.real": ["Installazione di una camera IFM Vision Assistant sul bobinoio della linea 7", "Configurazione precisa dell'algoritmo di rilevamento etichetta (ROI, soglie, validazione)", "Integrazione completa della camera all'automata Siemens in Profinet", "Programmazione del trigger per pilotare la camera nel momento esatto in cui l'etichetta viene posizionata", "Monitoraggio statistico dettagliato dei controlli: numero di rilevamenti, tasso di successo/fallimento, tempo di ciclo", "Interfaccia operatore per visualizzazione in diretta"],
        "project.camera-etiquette-atr.results_short": ["Zero difetti etichetta", "Controllo automatico", "Affidabilit√† 100%"],
        "project.camera-etiquette-atr.results": ["Eliminazione totale dei rischi di spedizione bobine senza etichetta", "Controllo automatizzato ultra-rapido senza alcun sovraccarico per l'operatore", "Affidabilit√† rafforzata del processo di produzione", "Riduzione drastica delle non conformit√† cliente", "ROI rapido per eliminazione delle riprese e ritorni"],
        // L√©gendes d'images en italien
        "image.etiquette-roquette": "Etichetta rocchetta",
        "image.interface-supervision": "Interfaccia supervisione",
        "image.interface-rfid": "Interfaccia RFID",
        "image.badge-operateur": "Badge operatore",
        "image.interface-rfid-atr": "Interfaccia RFID ATR",
        "image.tableau-bord-energetique": "Dashboard energetico",
        "image.ecran-accueil": "Schermata di benvenuto",
        "image.liste-gammes": "Lista Gammes",
        "image.validation-etapes": "Validazione fasi",
        "image.interface-parametres": "Interfaccia Parametri",
        "image.supervision-soudures": "Supervisione saldature",
        "image.historique-parametres": "Storico parametri",
        "image.camera-detection": "Camera di rilevamento",
        // Zones des projets en italien
        "area.ats-supervision-sql": "ATS ¬∑ Supervisione ¬∑ SQL",
        "area.ats-rfid-securite": "ATS ¬∑ RFID ¬∑ Sicurezza",
        "area.atr-rfid-securite": "ATR ¬∑ RFID ¬∑ Sicurezza",
        "area.ats-atr-web-dataviz": "ATS ¬∑ ATR ¬∑ Web ¬∑ DataViz",
        "area.android-api-ux": "Android ¬∑ API ¬∑ UX",
        "area.atr-supervision-qualite": "ATR ¬∑ Supervisione ¬∑ Qualit√†",
        "area.atr-vision-automatisme": "ATR ¬∑ Visione ¬∑ Automazione"
      }
    };

    this.state = { lang: "fr" };
    this.init();
  }

  init() {
    document.addEventListener("DOMContentLoaded", () => {
      const saved = localStorage.getItem("lang");
      const guessed = navigator.language?.toLowerCase().startsWith("it") ? "it" : "fr";
      this.state.lang = saved || guessed || "fr";

      document.body.addEventListener("click", (e) => {
        const btn = e.target.closest(".lang-btn");
        if (btn?.dataset?.lang) {
          this.setLang(btn.dataset.lang);
        }
      });

      this.applyI18n();
    });
  }

  applyI18n() {
    const root = document;
    const dict = this.messages[this.state.lang] || this.messages.fr;

    // Text nodes
    root.querySelectorAll("[data-i18n]").forEach(el => {
      const key = el.getAttribute("data-i18n");
      if (dict[key] != null) el.textContent = String(dict[key]);
    });

    // Attribute bindings (comma-separated)
    root.querySelectorAll("[data-i18n-attr]").forEach(el => {
      const key = el.getAttribute("data-i18n");
      const attrs = el.getAttribute("data-i18n-attr").split(",").map(s => s.trim());
      const val = dict[key];
      if (val != null) attrs.forEach(a => el.setAttribute(a, String(val)));
    });

    // Title tag if marked
    const titleEl = document.querySelector("title[data-i18n]");
    if (titleEl) {
      const key = titleEl.getAttribute("data-i18n");
      if (dict[key] != null) titleEl.textContent = String(dict[key]);
    }

    // Toggle pressed state on language buttons
    document.querySelectorAll(".lang-btn").forEach(btn => {
      btn.setAttribute("aria-pressed", btn.dataset.lang === this.state.lang ? "true" : "false");
    });

    // Update language switcher aria-labels
    const frBtn = document.querySelector('.lang-btn[data-lang="fr"]');
    const itBtn = document.querySelector('.lang-btn[data-lang="it"]');
    if (frBtn) frBtn.setAttribute('aria-label', this.state.lang === 'fr' ? 'Passer en Fran√ßais (actuel)' : 'Passer en Fran√ßais');
    if (itBtn) itBtn.setAttribute('aria-label', this.state.lang === 'it' ? 'Passare all\'Italiano (attuale)' : 'Passare all\'Italiano');
  }

  setLang(lang) {
    this.state.lang = (lang === "it") ? "it" : "fr";
    localStorage.setItem("lang", this.state.lang);
    window.requestAnimationFrame(() => this.applyI18n());
    
    // Update dynamic content
    if (window.updateDynamicContent) {
      window.updateDynamicContent();
    }
  }

  getLang() {
    return this.state.lang;
  }

  t(key, params) {
    const dict = this.messages[this.state.lang] || this.messages.fr;
    let text = dict[key] || key;
    if (params) {
      Object.keys(params).forEach(k => {
        text = text.replace(new RegExp(`{${k}}`, 'g'), params[k]);
      });
    }
    return text;
  }

  // Expose globally for backward compatibility
  exposeGlobally() {
    window.i18n = {
      setLang: (lang) => this.setLang(lang),
      getLang: () => this.getLang(),
      t: (key, params) => this.t(key, params),
      messages: this.messages
    };

    window.updateDynamicContent = () => {
      // This will be called when language changes to update dynamic content
      if (window.renderCards && window.DATA) {
        window.renderCards(window.DATA);
      }
      if (window.showAllSkills) {
        // Update skills lexicon if it's currently displayed
        const drawer = document.getElementById('drawer');
        if (!drawer.classList.contains('hidden') && document.getElementById('drawerTitle')?.textContent.includes('Lexique')) {
          window.showAllSkills();
        }
      }
      
      // Update comments system if it exists
      if (window.commentsComponent && window.currentProjectId) {
        // Reinitialize comments with new language
        window.commentsComponent.setEntity(window.currentProjectId);
      }
      
      // Apply translations to comments component if it exists
      if (window.commentsComponent) {
        window.commentsComponent.applyTranslations();
      }
    };
  }
}

// Auto-initialize and expose globally
const i18nSystem = new I18nSystem();
i18nSystem.exposeGlobally();
