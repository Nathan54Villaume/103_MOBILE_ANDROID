<!DOCTYPE html>
<html lang="fr" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="app.title">Dashboard Projets 2025 ‚Äî Nathan</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ["Inter", "ui-sans-serif", "system-ui"] },
          colors: {
            ink: { 900: "#0b0f14", 800: "#0f141b", 700: "#131924", 600: "#1a2332" },
            brand: { 400: "#34d399", 500: "#10b981", 600: "#059669" }
          },
          boxShadow: { glass: "0 10px 30px -12px rgba(0,0,0,.5)" }
        }
      }
    }
  </script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  
  <!-- Scripts externes -->
  <script src="../proxy-server.js"></script>
  <script src="../assets/js/comments-component.js"></script>
  
  <!-- Styles CSS personnalis√©s -->
  <link rel="stylesheet" href="css/dashboard.css">
</head>
<body class="h-full text-slate-100 font-sans">
  <!-- Header -->
  <header class="no-print sticky top-0 z-50 border-b border-white/10 bg-ink-900/80 backdrop-blur">
    <div class="mx-auto max-w-7xl px-4 py-3 flex items-center gap-3">
      <div class="h-8 w-8 rounded-xl bg-brand-500/20 grid place-items-center text-brand-400">‚öôÔ∏è</div>
      <div class="flex-1">
        <h1 class="text-lg sm:text-xl font-semibold tracking-tight" data-i18n="app.title">Dashboard Projets 2025 - VILLAUME Nathan</h1>
        <p class="text-xs text-slate-400" data-i18n="app.subtitle">Synth√®se interactive ‚Äî ATS / ATR</p>
      </div>
      <div class="flex items-center gap-2">
        <!-- S√©lecteur de langue -->
        <div class="lang-switch" role="group" aria-label="S√©lecteur de langue">
          <button class="lang-btn" data-lang="fr" aria-pressed="true" aria-label="Passer en Fran√ßais">
            <span class="flag flag-fr" aria-hidden="true"></span><span>FR</span>
          </button>
          <button class="lang-btn" data-lang="it" aria-pressed="false" aria-label="Passare all'Italiano">
            <span class="flag flag-it" aria-hidden="true"></span><span>IT</span>
          </button>
        </div>
        
        <!-- Bouton Ajouter un projet -->
        <button id="btnAddProject" class="px-3 py-2 text-sm rounded-lg bg-white/10 hover:bg-white/20 border border-white/10 flex items-center gap-2" data-i18n-attr="title" title="Ajouter un projet">
          <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
          </svg>
          <span data-i18n="btn.addProject">Ajouter un projet</span>
        </button>
        
        <!-- Bouton Partager -->
        <button id="btnShare" class="px-3 py-2 text-sm rounded-lg bg-white/10 hover:bg-white/20 border border-white/10 flex items-center gap-2" data-i18n-attr="title" title="Partager le dashboard">
          <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
          </svg>
          <span data-i18n="btn.share">Partager</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Section KPIs -->
  <section class="mx-auto max-w-7xl px-4 pt-6">
    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
      <div class="card rounded-2xl p-4 shadow-glass">
        <p class="text-slate-400 text-xs" data-i18n="kpi.activeProjects">Projets actifs</p>
        <p id="kpiProjects" class="text-2xl font-semibold">‚Äî</p>
      </div>
      <div class="card rounded-2xl p-4 shadow-glass">
        <p class="text-slate-400 text-xs" data-i18n="kpi.deliveredResults">R√©sultats livr√©s</p>
        <p id="kpiResults" class="text-2xl font-semibold">‚Äî</p>
      </div>
      <div class="card rounded-2xl p-4 shadow-glass cursor-pointer hover:bg-white/5 transition-colors kpi-card clickable" id="kpiSkillsCard">
        <p class="text-slate-400 text-xs" data-i18n="kpi.skillsUsed">Comp√©tences mises en jeu üîç</p>
        <p id="kpiSkills" class="text-2xl font-semibold">‚Äî</p>
      </div>
    </div>
  </section>

  <!-- Section Filtres -->
  <section class="no-print mx-auto max-w-7xl px-4 py-4">
    <div class="flex flex-wrap items-center gap-2">
      <span class="text-xs text-slate-400" data-i18n="filters.label">Filtres :</span>
      <button data-filter="all" class="chip rounded-full px-3 py-1 text-xs bg-white/10 hover:bg-white/20 filter-chip active" data-i18n="filters.all">Tout</button>
      <button data-filter="ATS" class="chip rounded-full px-3 py-1 text-xs bg-white/5 hover:bg-white/10 filter-chip">ATS</button>
      <button data-filter="ATR" class="chip rounded-full px-3 py-1 text-xs bg-white/5 hover:bg-white/10 filter-chip">ATR</button>
      <span class="mx-2 h-5 w-px bg-white/10"></span>
      <span class="text-xs text-slate-400" data-i18n="status.label">Statut :</span>
      <button data-status="all" class="chip rounded-full px-3 py-1 text-xs bg-white/10 hover:bg-white/20 filter-chip active" data-i18n="status.all">Tous</button>
      <button data-status="en_cours" class="chip rounded-full px-3 py-1 text-xs bg-white/5 hover:bg-white/10 filter-chip" data-i18n="status.inProgress">üü° En cours</button>
      <button data-status="livre" class="chip rounded-full px-3 py-1 text-xs bg-white/5 hover:bg-white/10 filter-chip" data-i18n="status.completed">üü¢ Termin√©</button>
    </div>
  </section>

  <!-- Section principale - Grille des projets -->
  <main class="mx-auto max-w-7xl px-4 pb-24">
    <div id="grid" class="grid print-grid grid-cols-1 md:grid-cols-2 gap-4"></div>
  </main>

  <!-- Drawer pour les d√©tails des projets -->
  <div id="drawer" class="fixed inset-0 hidden z-50 flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-black/70 backdrop-blur-sm" data-close></div>
    <aside class="relative w-full max-w-4xl max-h-[90vh] bg-ink-800 border border-white/10 card overflow-y-auto rounded-2xl shadow-2xl hide-scrollbar">
      <div class="p-5 flex items-center justify-between border-b border-white/10 sticky top-0 bg-ink-800/80 backdrop-blur z-10">
        <div>
          <h3 id="drawerTitle" class="text-lg font-semibold"></h3>
          <p id="drawerArea" class="text-xs text-slate-400"></p>
        </div>
        <button class="px-3 py-2 text-sm rounded-lg bg-white/10 hover:bg-white/20" data-close data-i18n="btn.close">Fermer</button>
      </div>
      <div class="p-5 space-y-6">
        <section>
          <h4 class="text-sm uppercase tracking-wide text-slate-400 mb-2" data-i18n="drawer.objective">Objectif</h4>
          <p id="drawerObjective" class="text-slate-200"></p>
        </section>
        <section>
          <h4 class="text-sm uppercase tracking-wide text-slate-400 mb-2" data-i18n="drawer.realization">R√©alisation</h4>
          <ul id="drawerReal" class="list-disc list-inside marker:text-brand-500 space-y-1"></ul>
        </section>
        <section>
          <h4 class="text-sm uppercase tracking-wide text-slate-400 mb-2" data-i18n="drawer.results">R√©sultats</h4>
          <ul id="drawerResults" class="list-disc list-inside marker:text-emerald-400 space-y-1"></ul>
        </section>
        <section id="drawerSkillsSection">
          <h4 id="drawerSkillsTitle" class="text-sm uppercase tracking-wide text-slate-400 mb-2" data-i18n="drawer.skills">Comp√©tences</h4>
          <div id="drawerSkills" class="flex flex-wrap gap-2"></div>
        </section>
        <section id="drawerImagesSection">
          <h4 class="text-sm uppercase tracking-wide text-slate-400 mb-2" data-i18n="drawer.screenshots">üì∏ Captures d'√©cran</h4>
          <div id="drawerImages" class="grid grid-cols-2 gap-3"></div>
        </section>
        <section id="drawerMediaSection">
          <h4 class="text-sm uppercase tracking-wide text-slate-400 mb-2" data-i18n="drawer.media">D√©mos & m√©dias</h4>
          <div id="drawerMedia" class="grid grid-cols-2 gap-3"></div>
        </section>
        <section class="mt-6 p-4 rounded-xl bg-slate-800/60 border border-slate-600/30">
          <h4 class="text-sm uppercase tracking-wide text-slate-400 mb-3" data-i18n="comments.title">Commentaires</h4>
          <div id="commentsContainer"></div>
        </section>
      </div>
    </aside>
  </div>

  <!-- Modal image agrandie -->
  <div id="imageModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4 bg-black/90">
    <button class="absolute top-4 right-4 text-white text-4xl hover:text-brand-400 transition-colors">&times;</button>
    <div class="relative max-w-7xl max-h-[90vh]">
      <img id="modalImage" src="" alt="" class="max-w-full max-h-[90vh] object-contain rounded-lg" />
      <p id="modalImageTitle" class="text-center text-white mt-4 text-lg"></p>
    </div>
  </div>

  <!-- Footer -->
  <footer class="fixed bottom-3 right-3 text-[11px] text-slate-400/80 no-print">
    <span data-i18n="footer.lastUpdate">Derni√®re mise √† jour</span> : <span id="lastUpdate"></span> ¬∑ <span data-i18n="footer.author">Auteur</span> : <span class="font-medium">N.Villaume</span>
  </footer>

  <!-- Scripts JavaScript modulaires -->
  <script src="js/utils.js"></script>
  <script src="js/skills-lexicon.js"></script>
  <script src="js/i18n.js"></script>
  <script src="components/Drawer.js"></script>
  <script src="components/ImageModal.js"></script>
  <script src="components/AuthModal.js"></script>
  <script src="components/ShareModal.js"></script>
  <script src="js/dashboard.js"></script>
</body>
</html>
